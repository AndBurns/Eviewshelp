<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <title>@sweep</title>
    <link rel="StyleSheet" href="css/functionref_s.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/seealso.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/popup.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/page.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        function  WWNoOp() {}
        function  WWNoValue() { return ""; }


        var  WebWorksHTMLHelp;
        var  WebWorksSeeAlso;
        var  WebWorksDropDown;


        if (typeof(HTMLHelp_Object) != "undefined")
        {
          WebWorksHTMLHelp = new HTMLHelp_Object();
          WebWorksSeeAlso  = new WebWorksSeeAlso_Object();
          WebWorksDropDown = new WebWorksDropDown_Object();
        }
        else
        {
          WebWorksHTMLHelp = new Object();
          WebWorksHTMLHelp.fNotifyClicked = WWNoOp;
          WebWorksHTMLHelp.fPopupDivTag   = WWNoValue;

          WebWorksSeeAlso = new Object();

          WebWorksDropDown = new Object();
          WebWorksDropDown.fWriteArrow  = WWNoOp;
          WebWorksDropDown.fWriteDIVOpen  = WWNoOp;
          WebWorksDropDown.fWriteDIVClose = WWNoOp;
        }
      // -->
    </script>
  </head>
  <body onclick="javascript:WebWorksHTMLHelp.fNotifyClicked();">
    <table cellspacing="0" align="left">
      <tr>
        <td>
          <a href="functionref_s-@svdfull.html"><img src="images/prev.gif" alt="Previous" border="0" /></a>
        </td>
        <td>
          <a href="functionref_t-Function_Reference_3a_T.html"><img src="images/next.gif" alt="Next" border="0" /></a>
        </td>
      </tr>
    </table>
    <br clear="all" />
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="cpreface.html">Command Reference</a> : Object and Command Basics : <a class="WebWorks_Breadcrumb_Link" href="functionref_home-Function_Reference.html">Function Reference</a> : Function Reference: S</div>
    <hr align="left" />
    <blockquote>
      <div class="Command_Title_Box"><a name="1262134">&nbsp;</a></div>
      <table class="Command_Heading" cellspacing="0" summary="">
        <tr>
          <td style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Black; border-left-style: solid; border-left-width: thin; border-right-color: Black; border-right-style: solid; border-right-width: thin; border-top-color: Black; border-top-style: solid; border-top-width: thin; padding-bottom: 5px; padding-left: 2pt; padding-right: 4px; padding-top: 5pt; vertical-align: middle; width: 108pt">
            <div class="Command_Name"><a name="1262131">@sweep</a></div>
          </td>
          <td style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Black; border-left-style: solid; border-left-width: thin; border-right-color: Black; border-right-style: solid; border-right-width: thin; border-top-color: Black; border-top-style: solid; border-top-width: thin; padding-bottom: 5px; padding-left: 2pt; padding-right: 4px; padding-top: 5pt; vertical-align: middle; width: 252pt">
            <div class="Command_Header" style="color: #0000ff; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><a name="1262133">&nbsp;</a></div>
          </td>
        </tr>
      </table>
      <div class="Command_Description"><a name="1262135">Sweep operator.</a></div>
      <div class="Body_Text"><a name="1262136">There are two syntaxes for @sweep, one for the symmetric, and the other for then non-symmetric operator.</a></div>
      <div class="Function_Types"><a name="1262137">Syntax:		</a><span class="Command_Summary">@sweep</span>(<span class="Argument">s[</span>, <span class="Argument">n]</span>)</div>
      <div class="Function_Types"><span class="Argument"><a name="1262138">	 s</a></span>:	sym</div>
      <div class="Function_Types"><span class="Argument"><a name="1262139">	 k</a></span>:	integer</div>
      <div class="Function_Types"><span class="Argument"><a name="1262140">	k2</a></span>:	(optional) integer</div>
      <div class="Function_Types"><a name="1262141">Return:		matrix</a></div>
      <div class="Body_Text"><a name="1262142">Returns the result of applying the symmetric sweep operator to symmetric matrix </a><span class="Argument">S</span> at diagonal element <span class="Argument">k</span>. If <span class="Argument">k2</span> is specified, sweeps on all diagonal elements between <span class="Argument">k</span> and <span class="Argument">k2</span>, inclusive.</div>
      <div class="Function_Types"><a name="1262143">Syntax:		</a><span class="Command_Summary">@sweep</span>(<span class="Argument">m, r, c</span>)</div>
      <div class="Function_Types"><span class="Argument"><a name="1262144">	m</a></span>:	matrix, sym</div>
      <div class="Function_Types"><span class="Argument"><a name="1262145">	r</a></span>:	integer</div>
      <div class="Function_Types"><span class="Argument"><a name="1262146">	c</a></span>:	integer</div>
      <div class="Function_Types"><a name="1262147">Return:		matrix</a></div>
      <div class="Body_Text"><a name="1262148">Returns the result of applying the non-symmetric sweep operator to general matrix </a><span class="Argument">m</span> at element (<span class="Argument">r</span>, <span class="Argument">c</span>).</div>
      <div class="Body_Text"><a name="1262149">The sweep operator is an elementary matrix row operation with particularly useful properties when applied to uncorrected sum of squares and cross-products (USSCP) matrices. Among these properties is the ability to calculate the coefficients for one or more regressions over a common set of regressors.</a></div>
      <div class="Body_Text"><a name="1262153">Let <img class="Default EquationGraphic" src="images/functionref_s.118.38.01.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 25px; max-width: 143px; top: 0.0pt" alt="" /> be an application of the symmetric sweep operator. Then, <img class="Default EquationGraphic" src="images/functionref_s.118.38.02.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 25px; max-width: 113px; top: 0.0pt" alt="" />, <img class="Default EquationGraphic" src="images/functionref_s.118.38.03.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 25px; max-width: 117px; top: 0.0pt" alt="" /> where <img class="Default EquationGraphic" src="images/functionref_s.118.38.04.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 37px; top: 0.0pt" alt="" />, <img class="Default EquationGraphic" src="images/functionref_s.118.38.05.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 25px; max-width: 117px; top: 0.0pt" alt="" /> where <img class="Default EquationGraphic" src="images/functionref_s.118.38.06.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 37px; top: 0.0pt" alt="" />, and</a></div>
      <div class="Multi-line_Eq_No_Number"><a name="1262172"><img class="Default EquationGraphic" src="images/functionref_s.118.38.07.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 50px; max-width: 142px; top: 0.0pt" alt="" /> </a></div>
      <div class="Body_Text"><a name="1262179">where <img class="Default EquationGraphic" src="images/functionref_s.118.38.08.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 37px; top: 0.0pt" alt="" /> and <img class="Default EquationGraphic" src="images/functionref_s.118.38.09.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 37px; top: 0.0pt" alt="" />.</a></div>
      <div class="Body_Text"><a name="1262183">Let <img class="Default EquationGraphic" src="images/functionref_s.118.38.10.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 25px; max-width: 149px; top: 0.0pt" alt="" /> be an application of the non-symmetric sweep operator. Then, <img class="Default EquationGraphic" src="images/functionref_s.118.38.11.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 25px; max-width: 103px; top: 0.0pt" alt="" />, <img class="Default EquationGraphic" src="images/functionref_s.118.38.12.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 25px; max-width: 117px; top: 0.0pt" alt="" /> where <img class="Default EquationGraphic" src="images/functionref_s.118.38.13.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 36px; top: 0.0pt" alt="" />, <img class="Default EquationGraphic" src="images/functionref_s.118.38.14.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 25px; max-width: 125px; top: 0.0pt" alt="" /> where <img class="Default EquationGraphic" src="images/functionref_s.118.38.15.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 37px; top: 0.0pt" alt="" />, and</a></div>
      <div class="Multi-line_Eq_No_Number"><a name="1262202"><img class="Default EquationGraphic" src="images/functionref_s.118.38.16.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 50px; max-width: 142px; top: 0.0pt" alt="" /> </a></div>
      <div class="Body_Text"><a name="1262209">where <img class="Default EquationGraphic" src="images/functionref_s.118.38.17.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 36px; top: 0.0pt" alt="" /> and <img class="Default EquationGraphic" src="images/functionref_s.118.38.18.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 37px; top: 0.0pt" alt="" />.</a></div>
      <div class="Command_Section"><a name="1262210">Examples</a></div>
      <div class="Body_Text"><a name="1262211">As an example of using the sweep operator to replicate the results of OLS regression, suppose we have series for one dependent variable, Y, and three regressors, X1, X2, X3.</a></div>
      <div class="Body_Text"><a name="1262212">We can organize the data into a group YX = [Y X1 X2 X3], form the USSCP matrix (YX)'YX, and apply the sweep operator to the three diagonal elements associated with the regressors (elements 2-4).</a></div>
      <div class="Body_Text"><a name="1262213">Each application of the sweep operator to a diagonal element effectively switches the role of the associated variable from dependent to regressor.</a></div>
      <div class="Multi-line_Input"><a name="1262214">workfile u 1000</a></div>
      <div class="Multi-line_Input"><a name="1262215">series y = nrnd</a></div>
      <div class="Multi-line_Input"><a name="1262216">series x1 = nrnd</a></div>
      <div class="Multi-line_Input"><a name="1262217">series x2 = nrnd</a></div>
      <div class="Multi-line_Input"><a name="1262218">series x3 = nrnd</a></div>
      <div class="Multi-line_Input"><a name="1262219">group g y x1 x2 x3</a></div>
      <div class="Multi-line_Input"><a name="1262220">sym usscp = @inner(g)</a></div>
      <div class="Multi-line_Input"><a name="1262221">sym S = @sweep(usscp, 2, 4)</a></div>
      <div class="Body_Text"><a name="1262222">The resulting block matrix will have the form:</a></div>
      <div class="Multi-line_Eq_No_Number"><a name="1262226"><img class="Default EquationGraphic" src="images/functionref_s.118.38.19.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 70px; max-width: 341px; top: 0.0pt" alt="" /> </a></div>
      <div class="Body_Text"><a name="1262227">This matrix contains all the information usually associated with the results of OLS regression, which we can extract.</a></div>
      <div class="Multi-line_Input"><a name="1262228">vector beta = @subextract(S, 2, 1, 4, 1) ' Regressor coefficients</a></div>
      <div class="Multi-line_Input"><a name="1262229">scalar SSR = S(1,1) ' Sum of squared residuals</a></div>
      <div class="Multi-line_Input"><a name="1262230">sym invXtX = -@subextract(S, 2, 2)</a></div>
      <div class="Multi-line_Input"><a name="1262231">vector se = @sqrt(SSR * @getmaindiagonal(invXtX) / (@obssmpl - 3)) ' Coefficient standard errors</a></div>
      <div class="Body_Text"><a name="1262232">We could compare these results to those of a standard equation object for the same regression.</a></div>
      <div class="Multi-line_Input"><a name="1262233">equation eq.ls(noconst) y x1 x2 x3</a></div>
      <div class="Body_Text"><a name="1262234">It is also possible to conduct multiple regressions against a set of common regressors. Consider a small example with two dependent variables, y1 and y2, and two regressors, x1 and x2. We proceed as before, again applying the sweep operator to only the two diagonal elements associated with regressors (3-4).</a></div>
      <div class="Multi-line_Input"><a name="1262235">series y1 = nrnd</a></div>
      <div class="Multi-line_Input"><a name="1262236">series y2 = nrnd</a></div>
      <div class="Multi-line_Input"><a name="1262237">group g1 y1 y2 x1 x2</a></div>
      <div class="Multi-line_Input"><a name="1262238">sym usscp1 = @inner(g1)</a></div>
      <div class="Multi-line_Input"><a name="1262239">sym S1 = @sweep(usscp1, 3, 4)</a></div>
      <div class="Multi-line_Input"><a name="1262240">matrix beta1 = @subextract(S1, 3, 1, 4, 2)</a></div>
      <div class="Multi-line_Input"><a name="1262241">vector SSR1 = @getmaindiagonal(@subextract(S1, 1, 1, 2, 2))</a></div>
      <div class="Multi-line_Input"><a name="1262242">sym invXtX1 = -@subextract(S1, 3, 3)</a></div>
      <div class="Multi-line_Input"><a name="1262243">vector se1 = @sqrt(@kronecker(SSR1, @getmaindiagonal(invXtX1)) / (@obssmpl - 2))</a></div>
      <div class="Body_Text"><a name="1262244">Again, we could compare these results to those of standard equation objects.</a></div>
      <div class="Multi-line_Input"><a name="1262245">equation eq1.ls(noconst) y1 x1 x2</a></div>
      <div class="Multi-line_Input"><a name="1262246">equation eq2.ls(noconst) y2 x1 x2</a></div>
      <div class="Command_Section"><a name="1262247">Cross-references</a></div>
      <div class="Body_Text"><a name="1262248">Goodnight, James H. (1979). &#8220;A Tutorial on the SWEEP Operator,&#8221; </a><span class="Emphasis">The American Statistician, </span>33, 149&#8211;158.</div>
      <div class="Body_Text"><a name="1262252">See also </a><span class="In-line_command_link"><a href="functionref_r-@rsweep.html#1260586" title="@rsweep">@rsweep</a></span>. </div>
      <div class="Body_Text"><a name="1255350">&nbsp;</a></div>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
      document.write(WebWorksHTMLHelp.fPopupDivTag());
     // -->
    </script>
  </body>
</html>