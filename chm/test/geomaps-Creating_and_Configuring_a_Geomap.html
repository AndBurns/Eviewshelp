<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <title>Creating and Configuring a Geomap</title>
    <link rel="StyleSheet" href="css/geomaps.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/seealso.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/popup.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/page.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        function  WWNoOp() {}
        function  WWNoValue() { return ""; }


        var  WebWorksHTMLHelp;
        var  WebWorksSeeAlso;
        var  WebWorksDropDown;


        if (typeof(HTMLHelp_Object) != "undefined")
        {
          WebWorksHTMLHelp = new HTMLHelp_Object();
          WebWorksSeeAlso  = new WebWorksSeeAlso_Object();
          WebWorksDropDown = new WebWorksDropDown_Object();
        }
        else
        {
          WebWorksHTMLHelp = new Object();
          WebWorksHTMLHelp.fNotifyClicked = WWNoOp;
          WebWorksHTMLHelp.fPopupDivTag   = WWNoValue;

          WebWorksSeeAlso = new Object();

          WebWorksDropDown = new Object();
          WebWorksDropDown.fWriteArrow  = WWNoOp;
          WebWorksDropDown.fWriteDIVOpen  = WWNoOp;
          WebWorksDropDown.fWriteDIVClose = WWNoOp;
        }
      // -->
    </script>
  </head>
  <body onclick="javascript:WebWorksHTMLHelp.fNotifyClicked();">
    <table cellspacing="0" align="left">
      <tr>
        <td>
          <a href="geomaps-Overview.html"><img src="images/prev.gif" alt="Previous" border="0" /></a>
        </td>
        <td>
          <a href="geomaps-Navigating_the_Geomap_Display.html"><img src="images/next.gif" alt="Next" border="0" /></a>
        </td>
      </tr>
    </table>
    <br clear="all" />
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="preface.html">User&#8217;s Guide</a> : <a class="WebWorks_Breadcrumb_Link" href="sec_data.html">Basic Data Analysis</a> : <a class="WebWorks_Breadcrumb_Link" href="geomaps-Geomaps.html">Geomaps</a> : Creating and Configuring a Geomap</div>
    <hr align="left" />
    <blockquote>
      <div class="Heading_3"><a name="189358">Creating and Configuring a Geomap</a></div>
      <div class="WebWorks_MiniTOC">
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#189360">Loading a Shapefile</a>
        </div>
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#189366">Linking Shapes to Observations</a>
        </div>
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#189379">Labeling the Shapes</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#193746">Fill Values Labeling</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#195363">Custom Labeling</a>
        </div>
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#189390">Assigning Fill Colors</a>
        </div>
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#189410">Hiding Observations and Shapes</a>
        </div>
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#189427">Additional Appearance Settings</a>
        </div>
      </div>
      <div class="Body_Text"><a name="189359">To create a geomap object in a workfile, you may select </a><span class="Menu_Item">Object/New Object/Geomap</span> from the workfile menu, optionally enter a name in the <span class="Menu_Item">Name for object</span> edit field, and click on <span class="Menu_Item">OK</span>. Alternately, you may simply enter the declaration command <span class="In-line_command">geomap</span> followed by an optional name in the command window, then press <span class="Menu_Item">Enter</span>.</div>
      <div class="Heading_4"><a name="189360">Loading a Shapefile</a></div>
      <div class="Body_Text"><a name="189361">To load a shapefile simply drop a shapefile (&#8220;.prj&#8221;) file in the client area of the window, or click to open a file dialog and navigate to and open the file.</a></div>
      <div class="Picture"><a name="189365"><img class="Default" src="images/geomaps.019.3.01.jpg" width="100%" style="left: 0.0pt; max-height: 417px; max-width: 552px; top: 0.0pt" alt="" /></a></div>
      <div class="Heading_4"><a name="189366">Linking Shapes to Observations</a></div>
      <div class="Body_Text"><a name="189367">(</a><span class="Emphasis">If you do not wish to use workfile data to label or color shapes, you may skip the following step. While this step is optional, geomaps are at their most useful when you associate individual shapes in the shapefile to observations in the workfile.</span>)</div>
      <div class="Body_Text"><a name="189368">Once a shapefile has been loaded, you will be prompted to link the shapes in the shapefile with the observations in the workfile:</a></div>
      <div class="Picture"><a name="189372"><img class="Default" src="images/geomaps.019.3.02.jpg" width="100%" style="left: 0.0pt; max-height: 426px; max-width: 562px; top: 0.0pt" alt="" /></a></div>
      <div class="Bullet_List_outer" style="margin-left: 65.6px">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="Bullet_List_inner" style="width: 10.799999999999997pt; white-space: nowrap">&#8226;	</div>
            </td>
            <td width="100%">
              <div class="Bullet_List_inner"><a name="189373">First, you should use the left dropdown menu to select the shapefile attribute whose values you will match to data in the workfile. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bullet_List_outer" style="margin-left: 65.6px">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="Bullet_List_inner" style="width: 10.799999999999997pt; white-space: nowrap">&#8226;	</div>
            </td>
            <td width="100%">
              <div class="Bullet_List_inner"><a name="189374">Next, you should use the right dropdown menu to select the series in the workfile that will be used to identify which observations in the workfile will be paired to a shape. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body_Text"><a name="189375">As you make selections in the dropdown menus, EViews will show you a partial list of the unique values from the specified shapefile attribute and series. Matches between the values in the shapefile attributes and the values series will be used for linking a shape with a workfile observation.</a></div>
      <div class="Body_Text"><a name="197764">If there is more than one observation in the series that matches a shapefile attribute value, the first observation matching observation will be used.</a></div>
      <div class="Body_Text"><a name="193794">Below each box is a description identifying how many elements in each list will be paired. Note that there may be some shapes in the shapefile without a corresponding observation in the workfile and vice versa.</a></div>
      <div class="Picture"><a name="189377">&nbsp;</a></div>
      <div class="Body_Text"><a name="189378">Once you are satisfied with your selections, click on </a><span class="Menu_Item">OK</span> to continue.</div>
      <div class="Heading_4"><a name="189379">Labeling the Shapes</a></div>
      <div class="Body_Text"><a name="192947">The </a><span class="Menu_Item">Label</span> dropdown menu on the geomap button bar allows you to set the shape labels using shapefile attributes, values for series in the workfile, custom labels, or no labels.</div>
      <div class="Body_Text"><a name="189380">After first loading a shapefile, you will see a rendering of the shapes. Each shape will be labeled using the first attribute found in the shapefile. In the example below, STATEFP was the first attribute in the file:</a></div>
      <div class="Picture"><a name="189384"><img class="Default" src="images/geomaps.019.3.03.jpg" width="100%" style="left: 0.0pt; max-height: 439px; max-width: 631px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="193744">The </a><span class="Menu_Item">Label</span> dropdown will contain all of the shapefile attributes, as well as entries for <span class="Menu_Item">FillValues</span>, <span class="Menu_Item">Custom</span> and <span class="Menu_Item">None, </span>and you may use the dropdown menu to quickly change labels between any of the entries. The <span class="Menu_Item">None</span> is self-explanatory, <span class="Menu_Item">FillValues</span> and <span class="Menu_Item">Custom</span> will be described below.</div>
      <div class="Body_Text"><a name="189385">For example, changing the label to show the &#8220;NAME&#8221; attribute yields:</a></div>
      <div class="Picture"><a name="189389"><img class="Default" src="images/geomaps.019.3.04.jpg" width="100%" style="left: 0.0pt; max-height: 438px; max-width: 631px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="196345">Should the default position of a label not be ideal, it may be adjusted manually. Simply click and drag a label to its desired location:</a></div>
      <div class="Heading_5"><a name="193746">Fill Values Labeling</a></div>
      <div class="Body_Text"><a name="194347">If you have successfully linked the shapes in the shapefile to the observations in the workfile (</a><span class="Link"><a href="#189366" title="Creating and Configuring a Geomap">&#8220;Linking Shapes to Observations&#8221;</a></span>), you may also label the shapes using values of a series in the workfile. </div>
      <div class="Body_Text"><a name="195393">Enter a series name in the </a><span class="Menu_Item">FillSeries</span> edit field on the button bar, and use the <span class="Menu_Item">Label</span> dropdown to select <span class="Menu_Item">FillValues</span>. EViews will use the values in the specified series as labels for each shape. For example, we may select the POP_FEMALE series to label easy of the shapes in our linked geomap:</div>
      <div class="Picture"><a name="195443"><img class="Default" src="images/geomaps.019.3.05.jpg" width="100%" style="left: 0.0pt; max-height: 479px; max-width: 584px; top: 0.0pt" alt="" /></a></div>
      <div class="Heading_5"><a name="195363">Custom Labeling</a></div>
      <div class="Body_Text"><a name="191342">To custom label each shape, you must first define the contents of each label. Click on </a><span class="Menu_Item">Properties</span>, then the <span class="Menu_Item">Label</span> tab, to display a dialog in which you may provide a definition for custom labels:</div>
      <div class="Picture"><a name="191545"><img class="Default" src="images/geomaps.019.3.06.jpg" width="100%" style="left: 0.0pt; max-height: 425px; max-width: 565px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="196420">You may use a combination of attributed names (enclosed in &#8220;[&#8220; and &#8220;]&#8221;), the special keyword &#8220;[FillValue]&#8221; to refer to the values in the </a><span class="Menu_Item">FillSeries</span> described in <span class="Link"><a href="#193746" title="Creating and Configuring a Geomap">&#8220;Fill Values Labeling&#8221;</a></span>.</div>
      <div class="Picture"><a name="196671"><img class="Default" src="images/geomaps.019.3.07.jpg" width="100%" style="left: 0.0pt; max-height: 425px; max-width: 565px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="196669">You may use also apply custom formatting including font family and size using the </a><span class="Menu_Item">Font</span> tab. </div>
      <div class="Body_Text"><a name="196861">Here we use the attribute &#8220;NAME&#8221; and the value of the workfile series POP_FEMALE to create a custom, multi-line label for each shape:</a></div>
      <div class="Picture"><a name="195924"><img class="Default" src="images/geomaps.019.3.08.jpg" width="100%" style="left: 0.0pt; max-height: 503px; max-width: 724px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="196871">For legibility, we have manually adjusted the position of some of the labels by dragging them to new locations</a></div>
      <div class="Heading_4"><a name="189390">Assigning Fill Colors</a></div>
      <div class="Body_Text"><a name="193146">Once you have successfully linked the shapes in the shapefile to the observations in the workfile (</a><span class="Link"><a href="#189366" title="Creating and Configuring a Geomap">&#8220;Linking Shapes to Observations&#8221;</a></span>), you may define a colormap to assign values from the workfile to each shape, and to use these values for coloring. To set the color settings for each shape, press the <span class="Menu_Item">Properties</span> button and then choose the <span class="Menu_Item">Color </span>tab:</div>
      <div class="Picture"><a name="189395"><img class="Default" src="images/geomaps.019.3.09.jpg" width="100%" style="left: 0.0pt; max-height: 422px; max-width: 569px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="192022">Here, we see that the fill </a><span class="Menu_Item">Base color</span> is set to a <span class="Menu_Item">Single color</span> of white. The <span class="Menu_Item">Preview</span> display reflects this setting.</div>
      <div class="Body_Text"><a name="189396">We are going to define a custom color map that uses the female population series (POP_FEMALE) to determine the fill color (for more on colormaps, see </a><span class="Link"><a href="Basedata-Value-Based_Text_and_Fill_Coloring.html#277333" title="Value-Based Text and Fill Coloring">&#8220;Value-Based Text and Fill Coloring&#8221;</a></span>).</div>
      <div class="Body_Text"><a name="189400">We change the settings in the dialog so that the colors will blend from blue to red as the population ranges from 0 to 570,000, regions with NA values for POP_FEMALE will be displayed with a white fill, and values outside of the range will be grey fill. We will use the a color range specification to define these settings.</a></div>
      <div class="Body_Text"><a name="192540">Click on the </a><span class="Menu_Item">Add Range</span> button, to bring up the custom range setting dialog:</div>
      <div class="Picture"><a name="192255"><img class="Default" src="images/geomaps.019.3.10.jpg" width="100%" style="left: 0.0pt; max-height: 333px; max-width: 437px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="189404">Notice that we use the default Name of Range. If we are going to create more than one range specification, you may wish to provide a more informative name.</a></div>
      <div class="Body_Text"><a name="192820">Clicking on </a><span class="Menu_Item">OK</span> creates the custom specification &#8220;Range&#8221; and returns to the main <span class="Menu_Item">Properties</span> dialog. The <span class="Menu_Item">Preview</span> window on the bottom shows the current color settings:</div>
      <div class="Picture"><a name="192896"><img class="Default" src="images/geomaps.019.3.11.jpg" width="100%" style="left: 0.0pt; max-height: 422px; max-width: 569px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="189405">After applying the colormap by pressing </a><span class="Menu_Item">OK</span> in the dialog and changing the slider to 2020, we now see the female population in year 2020:</div>
      <div class="Picture"><a name="189409"><img class="Default" src="images/geomaps.019.3.12.jpg" width="100%" style="left: 0.0pt; max-height: 574px; max-width: 646px; top: 0.0pt" alt="" /></a></div>
      <div class="Heading_4"><a name="189410">Hiding Observations and Shapes</a></div>
      <div class="Body_Text"><a name="189411">Recall that geomap contains all of the shapes in the original shapefile. When you link the observations in your workfile to these shapes, you create a correspondence between observations in the workfile and those shapes.</a></div>
      <div class="Body_Text"><a name="189412">Note however, that this correspondence may not be complete:</a></div>
      <div class="Bullet_List_outer" style="margin-left: 65.6px">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="Bullet_List_inner" style="width: 10.799999999999997pt; white-space: nowrap">&#8226;	</div>
            </td>
            <td width="100%">
              <div class="Bullet_List_inner"><a name="189413">There may be observations in the workfile that do not have shapes in the shapefile</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bullet_List_outer" style="margin-left: 65.6px">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="Bullet_List_inner" style="width: 10.799999999999997pt; white-space: nowrap">&#8226;	</div>
            </td>
            <td width="100%">
              <div class="Bullet_List_inner"><a name="189414">There may be shapes in the shapefile which do not correspond to observations in the workfile</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body_Text"><a name="189415">Understanding these different classes of observations is important to understanding what EViews will show when drawing a geomap.</a></div>
      <div class="Body_Text"><a name="189416">By default, EViews will show all of the shapes in the shapefile, whether or not they correspond to an observation in the workfile. You may restrict the display of these shapes in the following fashion:</a></div>
      <div class="Bullet_List_outer" style="margin-left: 65.6px">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="Bullet_List_inner" style="width: 10.799999999999997pt; white-space: nowrap">&#8226;	</div>
            </td>
            <td width="100%">
              <div class="Bullet_List_inner"><a name="189417">You may instruct EViews to filter out shapes corresponding to observations that are not in the current sample by pressing on </a><span class="Menu_Item">Smpl +/-</span> button. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bullet_List_Continue"><a name="189418">(</a><span class="Emphasis">Note that when a sample filter is applied, all shapes not associated with observations will also be hidden</span>).</div>
      <div class="Bullet_List_Continue"><a name="189419">To remove the filter, press the button again to toggle the settings.</a></div>
      <div class="Bullet_List_outer" style="margin-left: 65.6px">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="Bullet_List_inner" style="width: 10.799999999999997pt; white-space: nowrap">&#8226;	</div>
            </td>
            <td width="100%">
              <div class="Bullet_List_inner"><a name="189420">Additionally, you may instruct EViews to hide specific shapes by clicking on the </a><span class="Menu_Item">Properties</span> button and selecting the <span class="Menu_Item">Appearance</span> tab:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Picture"><a name="189424"><img class="Default" src="images/geomaps.019.3.13.jpg" width="100%" style="left: 0.0pt; max-height: 426px; max-width: 561px; top: 0.0pt" alt="" /></a></div>
      <div class="Bullet_List_Continue"><a name="189425">Simply check and uncheck the shape regions as desired. Note that the label for each of the shapes is taken from the label setting as described in </a><span class="Link"><a href="#189379" title="Creating and Configuring a Geomap">&#8220;Labeling the Shapes&#8221;</a></span>.</div>
      <div class="Body_Text"><a name="189426">Lastly, note that if you have applied a workfile sample filter, a shape region must satisfy </a><span class="Emphasis">both</span> the sample filter <span class="Emphasis">and</span> the <span class="Menu_Item">Appearance</span> settings filters. Thus, if an observation is in the current sample, but it&#8217;s <span class="Menu_Item">Appearance</span> checkbox is unchecked, it will be hidden. Likewise, if a shape&#8217;s <span class="Menu_Item">Appearance </span>checkbox is selected, but the observation is not in the current sample, it will be hidden.</div>
      <div class="Heading_4"><a name="189427">Additional Appearance Settings</a></div>
      <div class="Body_Text"><a name="189428">In addition to allowing you to show and hide specific shapes, the </a><span class="Menu_Item">Appearance</span> tab has settings for the shape outline color (<span class="Menu_Item">Outline Color)</span>, and whether to show a colormap legend (<span class="Menu_Item">Display legend</span>).</div>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
      document.write(WebWorksHTMLHelp.fPopupDivTag());
     // -->
    </script>
  </body>
</html>