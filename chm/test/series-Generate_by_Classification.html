<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <title>Generate by Classification</title>
    <link rel="StyleSheet" href="css/series.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/seealso.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/popup.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/page.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        function  WWNoOp() {}
        function  WWNoValue() { return ""; }


        var  WebWorksHTMLHelp;
        var  WebWorksSeeAlso;
        var  WebWorksDropDown;


        if (typeof(HTMLHelp_Object) != "undefined")
        {
          WebWorksHTMLHelp = new HTMLHelp_Object();
          WebWorksSeeAlso  = new WebWorksSeeAlso_Object();
          WebWorksDropDown = new WebWorksDropDown_Object();
        }
        else
        {
          WebWorksHTMLHelp = new Object();
          WebWorksHTMLHelp.fNotifyClicked = WWNoOp;
          WebWorksHTMLHelp.fPopupDivTag   = WWNoValue;

          WebWorksSeeAlso = new Object();

          WebWorksDropDown = new Object();
          WebWorksDropDown.fWriteArrow  = WWNoOp;
          WebWorksDropDown.fWriteDIVOpen  = WWNoOp;
          WebWorksDropDown.fWriteDIVClose = WWNoOp;
        }
      // -->
    </script>
  </head>
  <body onclick="javascript:WebWorksHTMLHelp.fNotifyClicked();">
    <table cellspacing="0" align="left">
      <tr>
        <td>
          <a href="series-Generate_by_Equation.html"><img src="images/prev.gif" alt="Previous" border="0" /></a>
        </td>
        <td>
          <a href="series-Resample.html"><img src="images/next.gif" alt="Next" border="0" /></a>
        </td>
      </tr>
    </table>
    <br clear="all" />
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="preface.html">User&#8217;s Guide</a> : <a class="WebWorks_Breadcrumb_Link" href="sec_data.html">Basic Data Analysis</a> : <a class="WebWorks_Breadcrumb_Link" href="series-Series.html">Series</a> : Generate by Classification</div>
    <hr align="left" />
    <blockquote>
      <div class="Heading_3"><a name="132774">Generate by Classification</a></div>
      <div class="WebWorks_MiniTOC">
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#132785">Output</a>
        </div>
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#132787">Specification</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#132789">Step Size</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#132808">Number of Bins</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#132817">Quantile Values</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#132830">Limit Values</a>
        </div>
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#132832">Options</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#132838">Encoding</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#132842">NA classification</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#132850">Out-of-Range Values</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#132853">Right-closed Bins</a>
        </div>
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#132870">A Couple of Warnings</a>
        </div>
      </div>
      <div class="Body_Text"><a name="132775">The series classification procedure generates a categorical series using ranges, or bins, of values in the numeric source series. You may assign individuals into one of <img class="Default EquationGraphic" src="images/series.017.26.01.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 13px; top: 0.0pt" alt="" /> classes based any of the following: equally sized ranges, ranges defined by quantile values, arbitrarily defined ranges. A variety of options allow you to control the exact definition of the bins, the method of encoding, and the assignment of value maps to the new categorical series.</a></div>
      <div class="Body_Text"><a name="132779">We illustrate these features using data on the 2005 Academic Performance Index (API) for California public schools and local educational agencies (&#8220;Api05btx.WF1&#8221;). The API is a numeric index ranging from 200 to 1000 formed by taking the weighted average of the student results from annual statewide testing at grades two through eleven.</a></div>
      <div class="Picture"><a name="132783"><img class="Default" src="images/series.017.26.02.jpg" width="100%" style="left: 0.0pt; max-height: 342px; max-width: 467px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="132784">The series API5B contains the base API index. Open the series and select </a><span class="Menu_Item">Proc/Generate by Classification...</span> to display the dialog. For the moment, we will focus on the <span class="Menu_Item">Output</span> and the <span class="Menu_Item">Specification</span> sections.</div>
      <div class="Heading_4"><a name="132785">Output</a></div>
      <div class="Body_Text"><a name="132786">In the </a><span class="Menu_Item">Output</span> section you will list the name of the target series to hold the classifications, and optionally, the name of a valmap object to hold information about the mapping. Here, we will save the step size classification into the series API5B_CT and save the mapping description in API5B_MP. If the classification series already exists, it will be overwritten; if an object with the map name already exists, the map will be saved in the next available name (&#8220;API5B_MP01&#8221;, <span class="Emphasis">etc.</span>).</div>
      <div class="Heading_4"><a name="132787">Specification</a></div>
      <div class="Body_Text"><a name="132788">The </a><span class="Menu_Item">Specification</span> section is where you will define the basic method of classification. The <span class="Menu_Item">Method</span> dropdown allows you to choose from the four methods of defining ranges: <span class="Menu_Item">Step Size</span>, <span class="Menu_Item">Number of Bins</span>, <span class="Menu_Item">Quantile Values</span>, <span class="Menu_Item">Limit Values</span>. The first two methods specify equal sized bins, the latter two define variable sized bins.</div>
      <div class="Heading_5"><a name="132789">Step Size</a></div>
      <div class="Body_Text"><a name="132790">We will begin by selecting the default </a><span class="Menu_Item">Step Size</span> method and entering &#8220;100&#8221; and &#8220;200&#8221; for the <span class="Menu_Item">Step size</span> and <span class="Menu_Item">Grid start</span> edit fields. The step size method defines a grid of bins of fixed size (the step size) beginning at the specified grid start, and continuing through the grid end. In this example, we have specified a step size of 100, and a <span class="Menu_Item">Grid start</span> value of 200. The <span class="Menu_Item">Grid end</span> is left blank so EViews uses the data maximum extended by 5%, ensuring that the rightmost bin extends beyond the data values. These settings define a set of ranges of the form: [100, 200), [200, 300), ..., [1000, 1100). Note that by default the ranges are closed on the left so that we say <img class="Default EquationGraphic" src="images/series.017.26.03.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 13px; top: 0.0pt" alt="" /> lies in the first bin if <img class="Default EquationGraphic" src="images/series.017.26.04.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 100px; top: 0.0pt" alt="" />.</div>
      <div class="Picture"><a name="132800"><img class="Default" src="images/series.017.26.05.jpg" width="100%" style="left: 0.0pt; max-height: 267px; max-width: 391px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="132801">Click on </a><span class="Menu_Item">OK</span> to accept these settings, then display the spreadsheet view of API5B_CT. We see that observations 1 and 3 fall in the [500, 600) bin, while observations 4 and 5 fall in the [400, 600) bin. Observations 2 and 6 were NAs in the original data and those values have been carried over to the classification.</div>
      <div class="Body_Text"><a name="132802">Keep in mind that since we have created both the classification series and a value map, the values displayed in the spreadsheet are mapped values, not the underlying data. To see the underlying classification data, you may go to the series toolbar and change the </a><span class="Menu_Item">Default</span> setting to <span class="Menu_Item">Raw Data</span>.</div>
      <div class="Picture"><a name="132806"><img class="Default" src="images/series.017.26.06.jpg" width="100%" style="left: 0.0pt; max-height: 307px; max-width: 403px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="132807">Opening the valmap API5B_MP, we see that the actual data in API5B_CT are integer values from 1 to 9, and that observations 1 and 3 are coded as 4s, while observations 4 and 5 are coded as 3s.</a></div>
      <div class="Heading_5"><a name="132808">Number of Bins</a></div>
      <div class="Body_Text"><a name="132809">The second method of creating equal sized bins is to select </a><span class="Menu_Item">Number of Bins</span> in the <span class="Menu_Item">Method</span> dropdown. The label for the second edit field will change from &#8220;Bin size&#8221; to &#8220;# of bins&#8221;, prompting you for an integer value <img class="Default EquationGraphic" src="images/series.017.26.07.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 13px; top: 0.0pt" alt="" />. EViews will define a set of bins by dividing the grid range into <img class="Default EquationGraphic" src="images/series.017.26.08.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 13px; top: 0.0pt" alt="" /> equal sized bins. For example, specifying 9 bins beginning at 200 and ending at 1100 generates a classification that is the same as the one specified using the step size of 100.</div>
      <div class="Heading_5"><a name="132817">Quantile Values</a></div>
      <div class="Body_Text"><a name="132818">One commonly employed method of classifying observations is to divide the data into quantiles. In the previous example, each school was assigned a value 1 to 9 depending on which of 9 equally sized bins contained its API. We may instead wish to assign each school an index for its decile. In this way we can determine whether a given school falls in the lowest 10% of schools, second lowest 10%, </a><span class="Emphasis">etc.</span></div>
      <div class="Picture"><a name="132822"><img class="Default" src="images/series.017.26.09.jpg" width="100%" style="left: 0.0pt; max-height: 304px; max-width: 434px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="132823">To create a decile classification, display the dialog, select </a><span class="Menu_Item">Quantile Values</span> from the <span class="Menu_Item">Method</span> dropdown, and enter the number of quantile values, in this case &#8220;10&#8221;.</div>
      <div class="Body_Text"><a name="132824">We see that the first 4 (non-NA) values are all in the first decile (&lt;583.8), while observations 7 and 8 lie in the eighth decile [780, 815). As before, these values are the mapped values; the underlying values are encoded with integer values from 1 to 10. </a></div>
      <div class="Picture"><a name="132828"><img class="Default" src="images/series.017.26.10.jpg" width="100%" style="left: 0.0pt; max-height: 319px; max-width: 404px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="132829">It is worth emphasizing that the mapped values are text representations of the quantile values, akin to labels, and will generally not be displayed in full precision.</a></div>
      <div class="Heading_5"><a name="132830">Limit Values</a></div>
      <div class="Body_Text"><a name="132831">You may also define your bins by providing an arbitrary set of two or more limit points. Simply select </a><span class="Menu_Item">Limit Values</span> from the <span class="Menu_Item">Method</span> dropdown and provide a list of numeric values, scalars, or vectors. EViews will sort the numbers and define a set of bins using those limits. </div>
      <div class="Heading_4"><a name="132832">Options</a></div>
      <div class="Picture"><a name="132836"><img class="Default" src="images/series.017.26.11.jpg" width="100%" style="left: 0.0pt; max-height: 176px; max-width: 218px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="132837">EViews provides various options that allow you to fine tune the classification method or to alter the encoding of classification values.</a></div>
      <div class="Heading_5"><a name="132838">Encoding</a></div>
      <div class="Body_Text"><a name="132839">The dropdown menu labeled </a><span class="Menu_Item">Encoding</span> allows you to select different methods of assigning values to the classified observations. By default, EViews classifies observations using the integers 1, 2, <span class="Emphasis">etc.</span> so that the observations falling in the first bin are assigned the value 1, observations in the second bin are assigned 2, and so forth. </div>
      <div class="Body_Text"><a name="132840">In addition to the default </a><span class="Menu_Item">Index (0, 1, 2,...)</span> method, you may elect to use the <span class="Menu_Item">Left edges of bins</span>, the <span class="Menu_Item">Right edges of bins</span>, or the <span class="Menu_Item">Midpoints of bins</span>. Each of these encoding methods should be self-explanatory. Note that index encoding is the only method available for classification by quantile values.</div>
      <div class="Body_Text"><a name="132841">Value maps are not created for classifications employing non-index encoding.</a></div>
      <div class="Heading_5"><a name="132842">NA classification</a></div>
      <div class="Body_Text"><a name="132843">By default, observations in the original series which are NA are given the value NA in the classification series. If you treat the NA as a category by checking </a><span class="Menu_Item">Include NAs in classification</span>, EViews will assign NAs the index value of 0 in the classification, and will map this value to the label &#8220;NA&#8221;.</div>
      <div class="Body_Text"><a name="132844">For example, re-running our first example (step size of 100, a grid start value of 200) but keeping NAs, we have the following </a><span class="Emphasis">raw</span> data. Note that the mapped values will be identical to those from the earlier example, so we have switched the series to <span class="Menu_Item">Raw Data</span> to see the values for NA:</div>
      <div class="Picture"><a name="132848"><img class="Default" src="images/series.017.26.12.jpg" width="100%" style="left: 0.0pt; max-height: 288px; max-width: 383px; top: 0.0pt" alt="" /></a></div>
      <div class="Body_Text"><a name="132849">We see that the observations 2 and 6, which were missing values in the original data, are encoded with the index value 0.</a></div>
      <div class="Heading_5"><a name="132850">Out-of-Range Values</a></div>
      <div class="Body_Text"><a name="132851">You may instruct EViews to generate an error if it encounters an observation that does not fall into one of the specified bins; by default, observations that lie outside the bin range are simply assigned an NA.</a></div>
      <div class="Body_Text"><a name="132852">This option is irrelevant for quantile value classification.</a></div>
      <div class="Heading_5"><a name="132853">Right-closed Bins</a></div>
      <div class="Body_Text"><a name="132866">Bins are left-closed by default, so that <img class="Default EquationGraphic" src="images/series.017.26.13.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 13px; top: 0.0pt" alt="" /> lies in the bin defined by <img class="Default EquationGraphic" src="images/series.017.26.14.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 14px; top: 0.0pt" alt="" /> and <img class="Default EquationGraphic" src="images/series.017.26.15.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 13px; top: 0.0pt" alt="" /> if <img class="Default EquationGraphic" src="images/series.017.26.16.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 67px; top: 0.0pt" alt="" />. To change the non-strict inequality from the left to the right <img class="Default EquationGraphic" src="images/series.017.26.17.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 67px; top: 0.0pt" alt="" />, you must instruct EViews to use right-closed bins by checking the box </a><span class="Menu_Item">Right-closed bin intervals (a, b]</span>. This setting should have little effect, if any, if your data are reasonably continuous.</div>
      <div class="Heading_4"><a name="132870">A Couple of Warnings</a></div>
      <div class="Body_Text"><a name="132871">In determining whether an observation is in a particular interval, EViews performs comparisons of real numbers to assess, for example, whether <img class="Default EquationGraphic" src="images/series.017.26.18.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 40px; top: 0.0pt" alt="" /> and whether <img class="Default EquationGraphic" src="images/series.017.26.19.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 40px; top: 0.0pt" alt="" />. We urge you to exercise caution in cases where <img class="Default EquationGraphic" src="images/series.017.26.20.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 14px; top: 0.0pt" alt="" /> and <img class="Default EquationGraphic" src="images/series.017.26.21.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 13px; top: 0.0pt" alt="" /> are finite precision representations of real numbers.</a></div>
      <div class="Body_Text"><a name="132884">To take a specific example, suppose that we wish to divide the interval from 0 to 1 into bins of size 0.1 (so that our limit points are 0.1, 0.2, 0.3, </a><span class="Emphasis">etc.</span>). Since 0.1 cannot be represented in floating point by a computer, comparisons will be made with numbers that are close to, but not exactly equal to 0.1<span class="Emphasis">.</span> As a result, when there are data values approximately equal to the limit points, classifications may behave unexpectedly since they are based on a comparison of two floating point numbers.</div>
      <div class="Body_Text"><a name="132885">A related issue occurs when you classify by number of bins, and set the start or end values equal to the data minimum or maximum. In this situation, depending upon whether you have selected left or right-closed intervals, observations with values equal to the start or end may fall out-of-range.</a></div>
      <div class="Body_Text"><a name="132886">To illustrate this issue, we extend our example by assuming that we wish to divide the 0&#8211;1 range into right-closed bins. Each bin will be of the form [0.1<img class="Default EquationGraphic" src="images/series.017.26.22.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 51px; top: 0.0pt" alt="" />, 0.1<img class="Default EquationGraphic" src="images/series.017.26.23.jpg" width="100%" style="display: inline; left: 0.0pt; max-height: 22px; max-width: 11px; top: 0.0pt" alt="" />). with the first interval given by (0, 1]. Now consider classifying those data values that are exactly equal to 0, and note that these values are out-of-range since they lie outside the first interval. The same is true for observations equal to 1 if we have defined left-closed bins. The comparison is more complex if the relevant endpoint is real valued since the out-of-range status would depend upon a floating point comparison.</a></div>
      <div class="Body_Text"><a name="132893">The obvious recommendation in this latter case are that: (1) you specify at most only one of range start and range end at the data extremes, and (2) if you set either the start or end to the corresponding data extreme, you define the intervals so that they are closed on that end (</a><span class="Emphasis">i.e.,</span> starts that equal the minimum have left-closed intervals, and ends that equal the maximum have right-closed intervals) and you set the range so that it extends past the other extreme. Our first example above adopts this strategy, setting the low value to the data minimum (200), setting the step size, and leaving the upper limit unspecified.</div>
      <div class="Body_Text"><a name="132894">More generally, we urge you to exercise caution when defining intervals with real-valued limits.</a></div>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
      document.write(WebWorksHTMLHelp.fPopupDivTag());
     // -->
    </script>
  </body>
</html>